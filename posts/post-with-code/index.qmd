---
title: "Indice de position sociale <br> Social position index"
bibliography: references.bib
date : "last-modified"
author: "Olivier Caron"
categories: [public policy, code, analysis]
image: "image.jpg"
format:
  html:
    grid:
      body-width: 1800px
---

This is a post with executable code.

```{r}
library(tidyverse)
library(esquisse)
library(readr)
library(reactable)
```

```{r}
ips_colleges <- read_delim("ips_colleges.csv")
ips_lycees <- read_delim("ips_lycees.csv")
```
```{r}
column_names_colleges <- c("school_year", "academy", "code_department", "department", "uai", "institution_name", "insee_code_commune", "commune_name", "sector", "ips", "sd_ips")

column_names_lycees <- c("school_year", "academy", "code_department", "department", "uai", "institution_name", "insee_code_commune", "commune_name", "sector", "lycee_type", "ips_gt", "ipd_pro", "ips", "sd_ips_gt", "sd_ips_pro")

#modify column names
names(ips_colleges)[1:11] <- column_names_colleges
names(ips_lycees)[1:15] <- column_names_lycees

ips_colleges["school_type"] <- "college"
ips_lycees["school_type"] <- "lycee"

ips_data <- bind_rows(ips_colleges,ips_lycees)
write_csv(ips_data,"ips_data.csv")
#write.csv(ips_data, "ips_data.csv", na = "", fileEncoding = "UTF-8")
```
```{r}

ips_data_reduced <- ips_data %>%
  select(school_year, school_type, ips, sector, institution_name, commune_name) %>%
  rename(
    "School Year" = school_year,
    "School Type" = school_type,
    "IPS" = ips,
    "Sector" = sector,
    "Institution Name" = institution_name,
    "Commune Name" = commune_name
  )

reactable(ips_data_reduced, filterable = TRUE, sortable = TRUE, bordered = TRUE)
```



```{r}

```

